/*! ulynlist-js-5.0.0(2015-02-12) */
!function(a){"function"==typeof define&&define.amd?define("ulynlist.pagebar",["jquery","artTemplate"],a):a(jQuery,template)}(function(a,b){"use strict";function c(c,d,e){var f=b.compile(c),g=f({opts:d});a(e).html(g),a(".pagebottonlist a",a(e)).click(function(){var b=a(this).attr("page");0>=b?b=1:b>d.totalPage&&(b=d.totalPage),a(e).trigger("clickPage",[b])}),a(".go_button",a(e)).click(function(){var b=a(".goto",a(e)).val();isNaN(b)||a(e).trigger("clickPage",[b])}),a(".goto",a(e)).keyup(function(){a(this).val(a(this).val().replace(/\D|^0/g,"")),a(this).val()>d.totalPage&&a(this).val(d.totalPage)}).bind("paste",function(){a(this).val(a(this).val().replace(/\D|^0/g,"")),a(this).val()>d.totalPage&&a(this).val(d.totalPage)}).css("ime-mode","disabled"),a(".setGoToPage",a(e)).val(d.currentPage+"/"+d.totalPage).click(function(){a(this).val();a(this).select()}).blur(function(){a(this).val(d.currentPage+"/"+d.totalPage)}).keydown(function(b){if(b=b||event,13==b.keyCode){var c=a(this).val(),f=/^[0-9]*[1-9][0-9]*$/;f.test(c)&&(Number(c)>d.totalPage&&a(this).val(d.totalPage),a(e).trigger("clickPage",[c]))}}),a(".setLinesPerPage",a(e)).keydown(function(b){if(b=b||event,13==b.keyCode){var c=a(this).val(),d=/^[0-9]*[1-9][0-9]*$/;d.test(c)&&(Number(c)>1e4&&(c=1e4),a(e).trigger("setLinesPerPage",[c]))}}),d.afterPaginationRender&&d.afterPaginationRender(a(e),d)}function d(a){window.console&&window.console.log&&window.console.log(a)}function e(a){a.currentPage=Number(a.currentPage),a.linesPerPage=Number(a.linesPerPage),a.totalNum=Number(a.totalNum),a.pageSpanNum=Number(a.pageSpanNum),a.totalPage=Math.ceil(a.totalNum/a.linesPerPage),0===a.totalPage&&(a.totalPage=1,a.currentPage=1)}b=b||window.template,a.fn.ulynlistPagination=function(b){var d=a.extend({},a.fn.ulynlistPagination.defaults,b);return this.each(function(){e(d);var b=this,f=d.pageBarTpl+"-pageBarTpl",g=!1;if(0===a("#"+f).length){g=!0;var h=d.pageBarPath+"/"+d.pageBarTpl+"/style.css",i=document.createElement("link");i.setAttribute("type","text/css"),i.setAttribute("rel","stylesheet"),i.setAttribute("href",h),a("head")[0].appendChild(i)}else a("#"+f).text()?c(a("#"+f).text(),d,b):(f=d.pageBarTpl+"-pageBarTpl"+(new Date).getTime()+Math.round(1e4*Math.random()),g=!0);if(g){a("body").append("<div id='"+f+"' style='display: none;'></div>");var j=d.pageBarPath+"/"+d.pageBarTpl+"/pagebar.tpl";a.get(j,function(e,g){"success"==g?(a("#"+f).text(e),c(e,d,b)):alert("页面模版加载出错！")},"text")}})},a.fn.ulynlistPagination.version="5.0.0",a.fn.ulynlistPagination.defaults={pageBarPath:"pagebar",pageBarTpl:"default",currentPage:1,linesPerPage:10,totalNum:0,pageSpanNum:5,afterPaginationRender:function(){},extra:{}},function(b){b.helper("$outPageBtn",function(a){var b="",c=1,d=a.totalPage;if(a.totalPage>a.pageSpanNum){var e=Math.ceil(a.pageSpanNum/2)-1,f=a.currentPage-e,g=Number(a.currentPage)+e;4>f?(g=a.pageSpanNum,f=1):g>a.totalPage-4&&(g=a.totalPage,f=a.totalPage-a.pageSpanNum),c=f,d=g}c>3&&(b+='<a page="1">1</a>',b+='<a page="2">2</a>...');for(var h=c;d>=h;h++)b+=h==a.currentPage?'<span page="'+h+'" class="current">'+h+"</span>":'<a page="'+h+'">'+h+"</a>";return d<a.totalPage-3&&(b+='...<a page="'+(a.totalPage-1)+'">'+(a.totalPage-1)+"</a>",b+='<a page="'+a.totalPage+'">'+a.totalPage+"</a>"),b}),b.helper("$doFunc",function(b){if(a.isFunction(b)){var c=[];if(arguments.length>1)for(var d=1;d<arguments.length;d++)c.push(arguments[d]);return b.apply(this,c)}return""}),b.helper("$console",function(a){d(a)})}(b)});